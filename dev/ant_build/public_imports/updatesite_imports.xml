<!--
    IBM Confidential
    OCO Source Materials
    (C) Copyright IBM Corp. 2018 All Rights Reserved.
    The source code for this program is not published or otherwise
    divested of its trade secrets, irrespective of what has
    been deposited with the U.S. Copyright Office.
-->

<project name="updatesite_imports">

	<property name="eclipse.workspace" value="eclipse_workspace"/>

	<dirname property="updatesite_imports.basedir" file="${ant.file.updatesite_imports}" />

	<taskdef file="${updatesite_imports.basedir}/../resources/mdt_updatesite-properties/GenerateUpdateSite.properties">
		<classpath path="${updatesite_imports.basedir}/../lib/wdt-updatesite_0.0.2_v.20131018_1700.jar" />
	</taskdef>

	<import file="internal_imports/standard_macros.xml" />
	<target name="pde-setup" >
	</target>


	  <target name="generateP2Metadata">
	  	<property name="mdt-updatesite-label" value="Microclimate Developer Tools Update Site"/>
	  	<java classname="org.eclipse.equinox.launcher.Main" dir="../../"
	  		  fork="true" jvm="${target.jvm}" spawn="false" failonerror="true">
	  		<arg value="-clean"/>
	  		<arg value="-noupdate"/>
	  		<arg value="-application"/>
	  		<arg value="org.eclipse.ant.core.antRunner"/>
	  		<arg value="-data"/>
	  		<arg file="${eclipse.workspace}"/>
	  		<arg value="-DstagingDir=${target.updatesite.repository}"/>
	  		<arg value="-DupdateSiteDir=${updateSiteDir}"/>
	  		<arg value="-file"/>
	  		<arg file="${gen.updatesite.file}"/>
	  		<classpath>
	  			<fileset dir="eclipse_sdk/eclipse/plugins/">
	  		    	<include name="org.eclipse.equinox.launcher_*.jar"/>
	  			</fileset>
	  		</classpath>
	  	</java>
      </target>

	<target name="generateSuppliersP2Metadata">
		<property name="suppliersUpdateSiteDir" value="${sourceDir}/suppliers/update-site" />
		<echo message="Suppliers target at ${suppliersUpdateSiteDir}" />
		<property name="suppliersSourceDir" value="${sourceDir}/suppliers" />
		<echo message="Suppliers source at ${suppliersSourceDir}" />

		<java classname="org.eclipse.equinox.launcher.Main" dir="../../"
			  fork="true" jvm="${target.jvm}" spawn="false" failonerror="true">
			<arg value="-clean"/>
			<arg value="-noupdate"/>
			<arg value="-application"/>
			<arg value="org.eclipse.ant.core.antRunner"/>
			<arg value="-data"/>
			<arg file="${eclipse.workspace}"/>
			<arg value="-DstagingDir=${suppliersUpdateSiteDir}"/>
			<arg value="-DupdateSiteDir=${suppliersSourceDir}"/>
			<arg value="-file"/>
			<arg file="${gen.suppliers.updatesite.file}"/>
			<classpath>
				<fileset dir="eclipse_sdk/eclipse/plugins/">
			    	<include name="org.eclipse.equinox.launcher_*.jar"/>
				</fileset>
			</classpath>
		</java>
	</target>
</project>
